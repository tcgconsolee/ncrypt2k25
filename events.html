<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>
    <script src="https://assets.codepen.io/16327/ScrambleTextPlugin3.min.js"></script>
    <script src="https://assets.codepen.io/16327/SplitText3.min.js"></script>
    <style>
        p {
            margin: 0;
        }
    </style>
    <script>
        gsap.registerPlugin(TextPlugin, SplitText, ScrambleTextPlugin);
    </script>
    <style>
        .char {
            display: inline-block;
            text-align: center;
            white-space: pre;
        }
    </style>
</head>

<body>
    <div class="bg">
        <img src="./imgs/events.png" alt="">
    </div>
    <div class="blur" style="display:block;opacity:1;"></div>
    <div class="eventwindow">
        <div class="eventhead">
            <p>///// <span>nCreate</span></p>
        </div>
        <div class="eventdesc">
            <p>In a unique blend of <span>Designathon</span> and <span>Hackathon</span>, participants will be challenged
                to harness both their creative flair and technical expertise to address a thought-provoking problem
                statement. The task is to craft a solution that is not only functional but also visually engaging. Each
                team is expected to bring together their diverse talents to ideate, develop, and deliver a project that
                aligns with the specific requirements provided.</p>
        </div>
        <div class="eventdetails">
            <div class="eventdetail">
                <div>
                    <img src="./imgs/person.svg" alt="">
                </div>
                <div>
                    <p>2 - 4 participants</p>
                </div>
            </div>
            <div class="eventdetail">
                <div>
                    <img src="./imgs/location.svg" alt="">
                </div>
                <div>
                    <p>Hybrid Event (Online + Offline)</p>
                </div>
            </div>
            <div class="eventlinks">
                <div>
                    <a href = "https://docs.google.com/document/d/1TQYcMeuNIB6tggVZBrklm3imFR31ZQnp/edit?tab=t.0" target="_blank">[LR] ↗</a>
                </div>
                <div>
                    <p>[REG] ↗</p>
                </div>
            </div>
        </div>
    </div>
    <script>
        let finalText =document.querySelector(".eventhead span").innerHTML
        gsap.to(document.querySelector(".eventhead span"), {
            duration: 1,
            scrambleText: {
                text: finalText,
                chars: "lowerAndUpperCase",
                revealDelay: 0.5,
                speed: 0.3,
                delimiter: "",
                tweenLength: true
            },
            ease: "power1.inOut"
        });
        setTimeout(() => {
            document.getElementsByClassName("eventdesc")[0].style.animation="fadein 1s forwards"
            document.getElementsByClassName("eventdetails")[0].style.animation="fadein 1s forwards"
            document.getElementsByClassName("eventlinks ")[0].style.animation="fadein 1s forwards"
        }, 1000);
        const settings = {
            radius: 10,
            duration: 1.2,
            speed: 0.5,
            scrambleChars: '.:',
        };

        const container = document.getElementsByClassName('eventdesc')[0];
        const p = container.querySelector('p');

        // Split text into chars
        const split = new SplitText(p, { type: 'words, chars', charsClass: 'char' });
        const chars = split.chars;

        // Lock width for each character to prevent layout shift
        chars.forEach(c => {
            const charWidth = c.offsetWidth;
            gsap.set(c, {
                display: 'inline-block',
                width: charWidth,
                attr: { 'data-content': c.innerHTML }
            });
        });

        // Handle mouse movement with variable + irregular distortion
        function handleMove(e) {
            const time = Date.now() * 0.003; // time factor for wave motion

            chars.forEach((c, i) => {
                const { left, top, width, height } = c.getBoundingClientRect();
                const dx = e.clientX - (left + width / 2);
                const dy = e.clientY - (top + height / 2);
                const dist = Math.hypot(dx, dy);

                // Random radius per character
                const charRadius = settings.radius * (0.6 + Math.random() * 0.8);

                // Add wave distortion based on time + index
                const wave = Math.sin(i * 0.4 + time) * 20;

                // Add angular distortion for irregular shapes
                const angle = Math.atan2(dy, dx);
                const angleBias = Math.abs(Math.sin(angle * 3)) * 40;

                // Final effective radius
                const effectiveRadius = charRadius + wave + angleBias;

                if (dist < effectiveRadius) {
                    gsap.to(c, {
                        overwrite: true,
                        duration: settings.duration * (1 - dist / effectiveRadius),
                        scrambleText: {
                            text: c.dataset.content || '',
                            chars: settings.scrambleChars,
                            speed: settings.speed
                        },
                        ease: 'none'
                    });
                }
            });
        }

        container.addEventListener('pointermove', handleMove);
    </script>
</body>

</html>